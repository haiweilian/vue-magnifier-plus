import{_ as p,c as g,o as a,a as v,n as u,f as c,g as y,h as H,m as S,r as w,i as b,e as m,v as M,w as x}from"./app-BUCn0nw6.js";const I={name:"VueMagnifierPlusMask",props:{width:{type:Number,default:0},height:{type:Number,default:0},selector:{type:Object,default:()=>({left:0,top:0,width:0,height:0})},maskColor:{type:String,default:""}},computed:{topStyle(){const{selector:e}=this;return{width:`${this.width}px`,height:`${e.top}px`}},leftStyle(){const{selector:e}=this;return{width:`${e.left}px`,height:`${e.height}px`}},rightStyle(){const{selector:e}=this;return{width:`${this.width-e.left-e.width}px`,height:`${e.height}px`}},bottomStyle(){const{selector:e}=this;return{width:`${this.width}px`,height:`${this.height-e.top-e.height}px`}},maskStyle(){return{backgroundColor:this.maskColor}}}};function Z(e,t,o,r,l,s){return a(),g("div",{class:"mask",style:u(s.maskStyle)},[v("div",{class:"block top",style:u(s.topStyle)},null,4),v("div",{class:"block left",style:u(s.leftStyle)},null,4),v("div",{class:"block right",style:u(s.rightStyle)},null,4),v("div",{class:"block bottom",style:u(s.bottomStyle)},null,4)],4)}const P=p(I,[["render",Z],["__scopeId","data-v-dc0f7bcc"]]),D={name:"VueMagnifierPlusZoomer",props:{left:{type:Number,default:0},top:{type:Number,default:0},scale:{type:Number,default:2},zoomRegion:{type:Object,default:()=>({width:0,height:0})},width:{type:Number,default:0},height:{type:Number,default:0}},computed:{zoomerStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},positionStyle(){return{transform:`translate3d(${-this.left}px, ${-this.top}px, 0)`}},zoomedStyle(){const{zoomRegion:e}=this;return{transform:`scale(${this.scale}) translateZ(0)`,width:`${e.width}px`,height:`${e.height}px`}}}};function N(e,t,o,r,l,s){return a(),g("div",{class:"zoomer",style:u(s.zoomerStyle)},[v("div",{class:"position",style:u(s.positionStyle)},[e.$slots.default?(a(),g("div",{key:0,class:"custom-zoomer",style:u(s.zoomedStyle)},[y(e.$slots,"default",{},void 0,!0)],4)):c("",!0)],4)],4)}const B=p(D,[["render",N],["__scopeId","data-v-1da30480"]]),C={name:"VuePhotoZommProSelector",props:{left:{type:Number,default:0},top:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},type:{type:String,default:"square"},mode:{type:String,default:"follow"}},computed:{selectorStyle(){return{width:`${this.width}px`,height:`${this.height}px`,transform:`translate3d(${this.left}px, ${this.top}px, 0)`}}}};function O(e,t,o,r,l,s){return a(),g("div",{class:H(["selector",o.type,o.mode]),style:u(s.selectorStyle)},[y(e.$slots,"default",{},void 0,!0)],6)}const F=p(C,[["render",O],["__scopeId","data-v-663c52be"]]),W={name:"ImgPreview",props:{url:{type:String,default:""}}},T=["src"];function X(e,t,o,r,l,s){return a(),g("img",S({class:"img-preview",style:{display:"block",width:"100%"},src:o.url},e.$attrs),null,16,T)}const Y=p(W,[["render",X]]),L={name:"ImgZoomer",props:{url:{type:String,default:""}}},V=["src"];function j(e,t,o,r,l,s){return a(),g("img",S({class:"img-zoomer",style:{display:"block",width:"100%",height:"100%"},src:o.url},e.$attrs),null,16,V)}const q=p(L,[["render",j]]),A=e=>{const t=e.getBoundingClientRect(),r=navigator.userAgent.indexOf("MSIE")!==-1&&e.tagName==="HTML"?-e.scrollTop:t.top;return{left:t.left,top:r,right:t.right,bottom:t.bottom,width:t.right-t.left,height:t.bottom-r}};function k(e,t,o){const r=t,l=o;return Math.min(Math.max(e,r),l)}const z=(e,t)=>({x:k(e.x,t.left,t.right),y:k(e.y,t.top,t.bottom)}),_=(e,t,o,r)=>({left:o,top:r,right:e-o,bottom:t-r}),U=()=>{const{documentElement:e,body:t}=document,o=e.scrollTop||window.pageYOffset||t.scrollTop,r=e.scrollLeft||window.pageXOffset||t.scrollLeft;return{scrollTop:o,scrollLeft:r}},Q=(e,t)=>{const o=document.createElement("img");o.addEventListener("load",()=>t(null,o)),o.addEventListener("error",t),o.src=e};function $(e,t,o,r,l){const s=e.getContext("2d"),d=l*90*Math.PI/180,{width:n,height:h}=t;switch(l){case 0:e.width=n,e.height=h,s.drawImage(t,0,0,n,h),e.style.width=o+"px",e.style.height=r+"px";break;case 1:e.width=h,e.height=n,s.rotate(d),s.drawImage(t,0,-h,n,h),e.style.width=r+"px",e.style.height=o+"px";break;case 2:e.width=n,e.height=h,s.rotate(d),s.drawImage(t,0,0,-n,-h),e.style.width=o+"px",e.style.height=r+"px";break;case 3:e.width=h,e.height=n,s.rotate(d),s.drawImage(t,-n,0,n,h),e.style.width=r+"px",e.style.height=o+"px";break}}function f(e,t){const o=e.querySelectorAll(t);if(o.length>0)for(let r=0;r<o.length;r++)o[r].parentNode.removeChild(o[r])}function ee(e,t){const o=document.querySelector(e),r=o.cloneNode(!0);r.style.cursor="auto",r.style.userSelect="none",r.style.pointerEvents="none";const l=o.querySelectorAll("canvas"),s=r.querySelectorAll("canvas");if(l.length>0&&l.length===s.length)for(let d=0;d<l.length;d++){const n=s[d].getContext("2d");try{n.drawImage(l[d],0,0)}catch{}}return f(r,"script"),f(r,"style"),f(r,"audio"),f(r,"video"),f(r,".vue-magnifier-plus"),t.forEach(d=>{f(r,d)}),r}const G={name:"VueMagnifierPlus",components:{Mask:P,Selector:F,Zoomer:B,ImgPreview:Y,ImgZoomer:q},props:{width:{type:Number,default:168},height:{type:Number,default:-1},url:{type:String,default:""},highUrl:{type:String,default:""},type:{type:String,default:"square",validator:function(e){return["circle","square"].indexOf(e)!==-1}},mode:{type:String,default:"follow",validator:function(e){return["follow","drag"].indexOf(e)!==-1}},scale:{type:Number,default:2},selector:{type:[Boolean,Object],default:!0},outZoomer:{type:[Boolean,Object],default:!1},disabledReactive:{type:Boolean,default:!1},disabledEvent:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},maskColor:{type:String,default:""}},data(){return{mouseEnterFlag:!1,outZoomerTop:0,mouse:{x:0,y:0},zoomRegionRect:{left:0,top:0,width:0,height:0},dragFlag:!1,dragStart:{pageX:0,pageY:0,mouseX:0,mouseY:0}}},computed:{isDragMode(){return this.mode==="drag"},isFollowMode(){return this.mode==="follow"},selectorOptions(){return typeof this.selector=="object"?this.selector:{release:!1}},outZoomerOptions(){return typeof this.outZoomer=="object"?this.outZoomer:{sticky:!1}},selectorWidth(){return this.width},selectorHeight(){return this.height>-1?this.height:this.width},selectorHalfWidth(){return this.selectorWidth/2},selectorHalfHeight(){return this.selectorHeight/2},zoomerWidth(){return this.outZoomer?this.selectorWidth*this.scale:this.selectorWidth},zoomerHeight(){return this.outZoomer?this.selectorHeight*this.scale:this.selectorHeight},zoomerHalfWidth(){return this.zoomerWidth/2},zoomerHalfHeight(){return this.zoomerHeight/2},zoomRegionAbsolute(){const{zoomRegionRect:e}=this,{scrollTop:t,scrollLeft:o}=U();return{left:e.left+o,top:e.top+t}},pointBound(){const{zoomRegionRect:e}=this;return _(e.width,e.height,this.selectorHalfWidth,this.selectorHalfHeight)},vPointBound(){const{zoomRegionRect:e,scale:t}=this;return _(e.width*t,e.height*t,this.zoomerHalfWidth,this.zoomerHalfHeight)},point(){const{mouse:e,selectorOptions:t}=this;return t.release?e:z(e,this.pointBound)},vPoint(){const{mouse:e,scale:t,selectorOptions:o}=this,r={x:e.x*t,y:e.y*t};return o.release?r:z(r,this.vPointBound)},selectorProps(){const{point:e}=this;return{width:this.selectorWidth,height:this.selectorHeight,left:e.x-this.selectorHalfWidth,top:e.y-this.selectorHalfHeight}},zoomerProps(){const{vPoint:e}=this;return{scale:this.scale,zoomRegion:this.zoomRegionRect,width:this.zoomerWidth,height:this.zoomerHeight,left:e.x-this.zoomerHalfWidth,top:e.y-this.zoomerHalfHeight}},outZoomerPosition(){return{top:`${this.outZoomerTop}px`}}},watch:{mode(){this.initSelector()},scale(){this.handleMouseMove(this.pointerInfo)},zoomRegionRect:{handler(){this.$emit("update",this.zoomRegionRect)},deep:!0}},mounted(){this.$zoomRegion=this.$refs.zoomRegion,this.update(),this.initSelector(),this.$emit("created")},methods:{initSelector(){const{width:e,height:t}=this.zoomRegionRect;this.mouseMove(e/2,t/2)},handleMouseEnter(){this.mouseEnter()},handleMouseMove(e){if(e=this.pointerInfo=e||this.pointerInfo,e){const{pageX:t,pageY:o}=e,{zoomRegionAbsolute:r}=this;this.mouseMove(t-r.left,o-r.top),this.outZoomer&&this.outZoomerOptions.sticky&&(this.outZoomerTop=Math.max(o-e.clientY,0))}},handleMouseLeave(){this.mouseLeave()},handleDragStart(e){e=e.touches?e.touches[0]:e,this.dragFlag=!0,this.dragStart={pageX:e.pageX,pageY:e.pageY,mouseX:this.mouse.x,mouseY:this.mouse.y}},handleDragMove(e){if(!this.dragFlag)return;e=e.touches?e.touches[0]:e;const t=e.pageX-this.dragStart.pageX,o=e.pageY-this.dragStart.pageY,r=this.dragStart.mouseX+t,l=this.dragStart.mouseY+o;let s={x:r,y:l};s=this.selectorOptions.release?s:z(s,this.pointBound),this.mouseMove(s.x,s.y)},handleDragEnd(){this.dragFlag=!1},mouseEnter(){!this.disabledReactive&&this.update(),this.mouseEnterFlag=!0},mouseMove(e,t){!this.disabledReactive&&this.update();const{mouse:o}=this;o.x=e,o.y=t},mouseLeave(){this.mouseEnterFlag=!1},update(){Object.assign(this.zoomRegionRect,A(this.$zoomRegion))}}};function J(e,t,o,r,l,s){const d=w("Mask"),n=w("ImgZoomer"),h=w("Zoomer"),R=w("Selector"),E=w("ImgPreview");return a(),g("div",{ref:"zoomRegion",class:"vue-magnifier-plus",onMouseenter:t[6]||(t[6]=i=>!o.disabledEvent&&s.isFollowMode&&s.handleMouseEnter(i)),onMousemove:t[7]||(t[7]=i=>!o.disabledEvent&&s.isFollowMode&&s.handleMouseMove(i)),onMouseleave:t[8]||(t[8]=i=>!o.disabledEvent&&s.isFollowMode&&s.handleMouseLeave(i))},[o.mask?b((a(),m(d,{key:0,width:l.zoomRegionRect.width,height:l.zoomRegionRect.height,"mask-color":o.maskColor,selector:s.selectorProps},null,8,["width","height","mask-color","selector"])),[[M,l.mouseEnterFlag||s.isDragMode]]):c("",!0),o.selector?b((a(),m(R,S({key:1},s.selectorProps,{type:o.type,mode:o.mode,onMousedown:t[0]||(t[0]=i=>!o.disabledEvent&&s.isDragMode&&s.handleDragStart(i)),onMousemove:t[1]||(t[1]=i=>!o.disabledEvent&&s.isDragMode&&s.handleDragMove(i)),onMouseup:t[2]||(t[2]=i=>!o.disabledEvent&&s.isDragMode&&s.handleDragEnd(i)),onTouchstart:t[3]||(t[3]=i=>!o.disabledEvent&&s.isDragMode&&s.handleDragStart(i)),onTouchmove:t[4]||(t[4]=i=>!o.disabledEvent&&s.isDragMode&&s.handleDragMove(i)),onTouchend:t[5]||(t[5]=i=>!o.disabledEvent&&s.isDragMode&&s.handleDragEnd(i))}),{default:x(()=>[o.outZoomer?c("",!0):(a(),m(h,S({key:0,class:"inner-zoomer"},s.zoomerProps),{default:x(()=>[o.highUrl||o.url?(a(),m(n,{key:0,url:o.highUrl||o.url},null,8,["url"])):c("",!0),y(e.$slots,"zoomer",{},void 0,!0)]),_:3},16)),y(e.$slots,"selector",{},void 0,!0)]),_:3},16,["type","mode"])),[[M,l.mouseEnterFlag||s.isDragMode]]):c("",!0),o.outZoomer?b((a(),m(h,S({key:2,class:"out-zoomer"},s.zoomerProps,{style:s.outZoomerPosition}),{default:x(()=>[o.highUrl||o.url?(a(),m(n,{key:0,url:o.highUrl||o.url},null,8,["url"])):c("",!0),y(e.$slots,"zoomer",{},void 0,!0)]),_:3},16,["style"])),[[M,l.mouseEnterFlag||s.isDragMode]]):c("",!0),o.url?(a(),m(E,{key:3,url:o.url},null,8,["url"])):c("",!0),y(e.$slots,"default",{},void 0,!0)],544)}const te=p(G,[["render",J],["__scopeId","data-v-5425a512"]]);export{te as V,ee as c,Q as l,$ as r};
